<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Quiz - Mitosis</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1, h2 {
            text-align: center;
        }
        .quiz-container {
            margin: 20px 0;
        }
        .question {
            margin-bottom: 20px;
        }
        .question p {
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 10px 0;
        }
        button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            margin-top: 20px;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
    </style>
</head>
<body>
    <header>
        <h1>Quiz!</h1>
        <nav>
            <a href="index.html">Mitosis Overview</a>
            <a href="abnormal.html">Abnormal Mitosis</a>
            <a href="quiz.html" class="active"> Take a Quiz!</a>
        </nav>
    </header>

    <main>
    <h2>Test Your Knowledge on Mitosis and Abnormal Mitosis</h2>
    <div class="quiz-container">
        <form id="quizForm">
            <div class="question">
                <p>1. What is the main purpose of mitosis?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> a) To create genetic diversity</label>
                    <label><input type="radio" name="q1" value="b"> b) To reduce chromosome number</label>
                    <label><input type="radio" name="q1" value="c"> c) To repair damaged tissues</label>
                    <label><input type="radio" name="q1" value="d"> d) To produce gametes</label>
                </div>
            </div>
            <div class="question">
                <p>2. In which phase of mitosis do chromosomes align at the cell's equator?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> a) Anaphase</label>
                    <label><input type="radio" name="q2" value="b"> b) Telophase</label>
                    <label><input type="radio" name="q2" value="c"> c) Prophase</label>
                    <label><input type="radio" name="q2" value="d"> d) Metaphase</label>
                </div>
            </div>
            <div class="question">
                <p>3. What happens during anaphase?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> a) Sister chromatids separate</label>
                    <label><input type="radio" name="q3" value="b"> b) Chromosomes condense</label>
                    <label><input type="radio" name="q3" value="c"> c) Nuclear envelope reforms</label>
                    <label><input type="radio" name="q3" value="d"> d) Spindle fibers form</label>
                </div>
            </div>
            <div class="question">
                <p>4. Abnormal mitosis can lead to which of the following?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> a) Meiosis</label>
                    <label><input type="radio" name="q4" value="b"> b) Cancer</label>
                    <label><input type="radio" name="q4" value="c"> c) Normal cell division</label>
                    <label><input type="radio" name="q4" value="d"> d) Increased genetic diversity</label>
                </div>
            </div>
            <div class="question">
                <p>5. What is a common cause of abnormal mitosis?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> a) Normal cell cycle regulation</label>
                    <label><input type="radio" name="q5" value="b"> b) Balanced chromosome numbers</label>
                    <label><input type="radio" name="q5" value="c"> c) DNA replication errors</label>
                    <label><input type="radio" name="q5" value="d"> d) Proper spindle fiber function</label>
                </div>
            </div>
            <div class="question">
                <p>6. During which phase does the nuclear envelope break down?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> a) Metaphase</label>
                    <label><input type="radio" name="q6" value="b"> b) Telophase</label>
                    <label><input type="radio" name="q6" value="c"> c) Anaphase</label>
                    <label><input type="radio" name="q6" value="d"> d) Prophase</label>
                </div>
            </div>
            <div class="question">
                <p>7. What structure pulls chromosomes apart during mitosis?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> a) Cell membrane</label>
                    <label><input type="radio" name="q7" value="b"> b) Nucleolus</label>
                    <label><input type="radio" name="q7" value="c"> c) Spindle fibers</label>
                    <label><input type="radio" name="q7" value="d"> d) Centrioles</label>
                </div>
            </div>
            <div class="question">
                <p>8. Which checkpoint ensures DNA is replicated correctly before mitosis?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> a) G2 checkpoint</label>
                    <label><input type="radio" name="q8" value="b"> b) M checkpoint</label>
                    <label><input type="radio" name="q8" value="c"> c) S checkpoint</label>
                    <label><input type="radio" name="q8" value="d"> d) G1 checkpoint</label>
                </div>
            </div>
            <div class="question">
                <p>9. What can result from nondisjunction in mitosis?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> a) Faster cell division</label>
                    <label><input type="radio" name="q9" value="b"> b) Normal daughter cells</label>
                    <label><input type="radio" name="q9" value="c"> c) Increased cell size</label>
                    <label><input type="radio" name="q9" value="d"> d) Cells with incorrect chromosome numbers</label>
                </div>
            </div>
            <div class="question">
                <p>10. Which protein regulates the cell cycle and can be mutated in cancer?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> a) Insulin</label>
                    <label><input type="radio" name="q10" value="b"> b) Collagen</label>
                    <label><input type="radio" name="q10" value="c"> c) Cyclin</label>
                    <label><input type="radio" name="q10" value="d"> d) Hemoglobin</label>
                </div>
            </div>
            <button type="submit">Submit Quiz</button>
        </form>
        <div id="results"></div>
    </div>

    <footer>
        <p>Â© 2025 Mitosis Education. All rights reserved.</p>
    </footer>

    <script>
        document.getElementById('quizForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const answers = {
                q1: 'c',
                q2: 'd',
                q3: 'a',
                q4: 'b',
                q5: 'c',
                q6: 'd',
                q7: 'c',
                q8: 'a',
                q9: 'd',
                q10: 'c'
            };

            const correctAnswersText = {
                q1: 'To repair damaged tissues',
                q2: 'Metaphase',
                q3: 'Sister chromatids separate',
                q4: 'Cancer',
                q5: 'DNA replication errors',
                q6: 'Prophase',
                q7: 'Spindle fibers',
                q8: 'G2 checkpoint',
                q9: 'Cells with incorrect chromosome numbers',
                q10: 'Cyclin'
            };

            let score = 0;
            const total = 10;
            let resultsHTML = '<h3>Results</h3>';
            let emailBody = `Biology Quiz Results\n\nScore: ${score}/${total}\n\nIncorrect Questions:\n`;
            let incorrectQuestions = [];

            try {
                for (let i = 1; i <= total; i++) {
                    const question = `q${i}`;
                    const userAnswer = document.querySelector(`input[name="${question}"]:checked`);
                    const questionText = document.querySelector(`#quizForm .question:nth-child(${i}) p`)?.innerText;

                    if (!questionText) {
                        throw new Error(`Question ${i} text not found`);
                    }

                    if (userAnswer) {
                        const isCorrect = userAnswer.value === answers[question];
                        if (isCorrect) {
                            score++;
                            resultsHTML += `<p class="correct">${questionText}: Correct!</p>`;
                        } else {
                            resultsHTML += `<p class="incorrect">${questionText}: Incorrect. Correct answer: ${correctAnswersText[question]}</p>`;
                            incorrectQuestions.push(`${questionText}: Incorrect (Your answer: ${userAnswer.value}, Correct answer: ${correctAnswersText[question]})`);
                        }
                    } else {
                        resultsHTML += `<p class="incorrect">${questionText}: Not answered. Correct answer: ${correctAnswersText[question]}</p>`;
                        incorrectQuestions.push(`${questionText}: Not answered (Correct answer: ${correctAnswersText[question]})`);
                    }
                }

                emailBody = `Biology Quiz Results\n\nScore: ${score}/${total}\n\nIncorrect Questions:\n${incorrectQuestions.length > 0 ? incorrectQuestions.join('\n') : 'None'}`;
                resultsHTML += `<h3>Score: ${score}/${total}</h3>`;

                const resultsDiv = document.getElementById('results');
                if (resultsDiv) {
                    resultsDiv.innerHTML = resultsHTML;
                } else {
                    console.error('Results div not found');
                    alert('Error displaying results. Please try again.');
                    return;
                }
                await emailjs.send('service_225sxuu', 'template_29jx2wc', {
                    to_email: 'wangbravic@gmail.com',
                    quiz_results: emailBody
                }, '02S9JutGzhf77P8F2');
                alert('Quiz results sent to wangbravic@gmail.com');
            } catch (error) {
                console.error('Error sending email:', error);
                alert('Failed to send quiz results. Please try again.');
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        emailjs.init('02S9JutGzhf77P8F2');
    </script>
</body>
</html>
